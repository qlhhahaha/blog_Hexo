---
title: ã€ŠCS106Lç¬”è®°ã€‹
date: 2023-04-14
tags: [c++, æ–¯å¦ç¦, hashmap]
categories: æ ¸å¿ƒç§‘æŠ€çœ‹ç¾å¸
index_img: /img/CS106L.png
---





{% note success%}
è¯¾ç¨‹æ¥æºï¼šStanford-CS106L(22 fall)

è¯¾ç¨‹ä»‹ç»ï¼š[HashMap_for_CS106L](https://github.com/qlhhahaha/HashMap_for_CS106L)

{% endnote %}



# Lecture2ã€Types and Structs

## ä¸€ã€Types

- **é™æ€è¯­è¨€ï¼š**æœ‰åå­—çš„ä¸œè¥¿ï¼ˆå˜é‡/å‡½æ•°ï¼‰è¦äººä¸ºç»™ç±»å‹
- **åŠ¨æ€è¯­è¨€ï¼š**è¿è¡Œæ—¶è§£é‡Šå™¨æ ¹æ®current valueè‡ªåŠ¨ç»™ç±»å‹

![](https://s2.loli.net/2023/04/14/YX8tVdgN5bH6hiu.png)

![](https://s2.loli.net/2023/04/14/kQbXxquftZjcAMz.png)



# Lecture3ã€Stream

## ä¸€ã€cout

coutæ˜¯stdå†…åµŒçš„è¾“å‡ºæµï¼Œå®ƒçš„ç±»å‹æ˜¯std::ostreamï¼Œæ‰€ä»¥å…¶å®**ä½ ä¹Ÿå®Œå…¨å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªstd::ostreamç±»å‹çš„è¾“å‡ºæµ**

```cpp
void writeToStream(std::ostream& anyOutputStream, int favouriteNumber) {
    anyOutputStream << "Writing to stream: "
        << favouriteNumber << endl;
}

int main() {
    // Write an int to the user's console.
    int favouriteNumber = 1729;

    // Write method to take any ostream
    std::ofstream fileOut("out.txt");

    writeToStream(cout, favouriteNumber);
    writeToStream(fileOut, favouriteNumber + 1);
    return 0;
}
```

ä¸Šè¿°ä»£ç ä¼šåœ¨æ§åˆ¶å°ä¸Šè¾“å‡º1729ï¼Œåœ¨out.txtä¸­å†™å…¥1730

## äºŒã€cin

åŒç†ï¼Œå¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªstd::istreamç±»å‹çš„è¾“å…¥æµ

```cpp
//read numbers from a file
void readNumbers() {
    // Create our istream and make it open the file
    std::istream input("res/numbers.txt");
    int value;
    while(true) {
        input >> value;
        if(input.fail())
            break;
        cout << "Value read: " << value << endl;
    }
}
```

è¾“å‡ºç»“æœï¼š

![](https://s2.loli.net/2023/04/14/GxBvd9eRrohVJXI.png)

# Lecture4ã€Initialization and References

## ä¸€ã€Initialization

1. æ³¨æ„vectorä¸¤ç§åˆå§‹åŒ–çš„åŒºåˆ«

![Untitled](https://s2.loli.net/2023/04/14/kPzA2belKB5qnNr.png)

{% note warning%}
ğŸ’¡ PS. å…¶ä¸­å¤§æ‹¬å·åˆå§‹åŒ–è¢«ç§°ä¸ºâ€œç»Ÿä¸€åˆå§‹åŒ–â€ï¼Œæ˜¯C11å¼•è¿›çš„ï¼Œå¯¹æ‰€æœ‰æ•°æ®ç±»å‹éƒ½é€‚ç”¨ï¼Œå¯ä»¥åœ¨declarationæ—¶ç«‹å³åˆå§‹åŒ–
{% endnote %}

2. **ç»“æ„åŒ–ç»‘å®šï¼ˆstructured bindingï¼‰**

â€‹	ideaï¼šç»å…¸è¯­æ³•ä¸­ï¼Œä¸ºäº†æ¥æ”¶ä¸€ä¸ªstruct\pairï¼Œå¯èƒ½å¾—ç”¨ç‚¹å·å»ä¸€ä¸ªä¸ªè¯»å–ç»“æ„ä½“é‡Œçš„å€¼ï¼Œè¿™å¾ˆéº»çƒ¦ï¼›c17ä¸­å¼•	å…¥ç»“æ„åŒ–ç»‘å®šï¼Œå¯ä»¥ç›´æ¥ç”¨**auto+ä¸­æ‹¬å·**å»æ¥æ”¶ï¼ˆè¯è¯´è¿™ä¸œè¥¿matlabé‡Œä¸æ˜¯æ—©æœ‰äº†å—ã€‚ã€‚ï¼‰

![](https://s2.loli.net/2023/04/14/suEOq9jPceZ7LD8.png)



## äºŒã€References

ä¸€ä¸ªç»å…¸çš„å¼•ç”¨errorï¼šæƒ³ç»™pairä¸­çš„æ¯ä¸ªå€¼åŠ ä¸€

```cpp
void shift(vector<std::pair<int, int>>& nums) 
{
		for (auto [num1, num2]: nums) 
		{//æ˜¾ç„¶é”™äº†ï¼Œå› ä¸ºnum1ã€2æ˜¯numsçš„å‰¯æœ¬ï¼Œå¼€è¾Ÿäº†æ–°ç©ºé—´
				num1++;
				num2++;
		}
}
```

åº”è¯¥ä¿®æ”¹ä¸º for (auto& [num1, num2]: nums)



# Lecture5ã€Container

1. ä¸è¦ææ··vectorçš„_sizeå’Œ_capacityå±æ€§

![](https://s2.loli.net/2023/04/14/Zv2KtfI5RH7MVgW.png)



# Lecture7ã€Classes

1. STLä¸­æ‰€æœ‰çš„containeréƒ½æ˜¯class
2. **æ¨¡æ¿ç±»ï¼ˆtemplate classï¼‰**

```cpp
//æ¨¡æ¿ç±»è¯­æ³•
template<typename First, typename Second> class my_pair
{
		public:
			First get_first();
			Second get_second();
	
			void set_first(First f);
			void set_second(Second f);
		
		private:
			First first;
			Second second;
};		
```

ç¤ºä¾‹ï¼š

```cpp
/*****************vector.h********************/
#include "vector.cpp"           //ps2

template<typename T>
class vector<T>
{
	T my_at(int i);
}

/*****************vector.cpp********************/
template<typename T>       //ps1
void vector<T>::my_at(int i)
{
	//oops
}

/*****************main.cpp********************/
#include "vector.h"
vector<int> a;
a.my_at(5);
```

{% note warning%}

<aside> ğŸ’¡ PS.

1. é¦–å…ˆï¼Œæ³¨æ„å¿…é¡»åœ¨æ¯ä¸ªæˆå‘˜å‡½æ•°é‚£å„¿å»å£°æ˜ä¸€éå®ƒæ˜¯templateï¼Œä¹Ÿå°±æ˜¯å»æ‰ps1é‚£ä¸€è¡Œä¼šæŠ¥é”™
2. ps2é‚£ä¸€è¡Œï¼Œæ³¨æ„ï¼Œvector.hå¤´æ–‡ä»¶é‡Œè¦include â€œvector.cppâ€ï¼Œå¦åˆ™æ‰¾ä¸åˆ°my_at()å‡½æ•°çš„å…·ä½“å®šä¹‰ ï¼ˆæƒ³äº†è€åŠå¤©ä¹Ÿæ²¡æƒ³æ¸…æ¥šä¸ºå•¥ã€‚ã€‚å—¯è®°ç€å§ï¼‰
3. ä¸€èˆ¬ä¸åœ¨å¤´æ–‡ä»¶é‡Œincludeæºæ–‡ä»¶ï¼Œå› ä¸ºå¯èƒ½é€ æˆé‡å¤å®šä¹‰ï¼›ä½†ä¹Ÿæœ‰ä¸€äº›åœºæ™¯æˆ–è®¸ä¼šç”¨ï¼Œæ¯”å¦‚vscodeé‡Œæ‡’å¾—å†™cmakeè„šæœ¬ï¼Œå°±å¯ä»¥ç”¨include<.cpp>è¿™ç§trickã€‚ã€‚

{% endnote %}

![](https://s2.loli.net/2023/04/14/oDHRjb3kGdw2ON8.jpg)

# Lecture9ã€Template Functions

1. **motivationï¼š**ä¸€ä¸ªåŠŸèƒ½é€šç”¨æ€§å¾ˆå¼ºçš„å‡½æ•°ï¼Œè¦å› ä¸ºæ¥æ”¶å‚æ•°æ•°æ®ç±»å‹ä¸åŒè€Œå¤åˆ¶ç²˜è´´å¤šä¸ªç‰ˆæœ¬å—ï¼Ÿå½“ç„¶ï¼Œfunction overloadingå¯ä»¥ç®€åŒ–è¿™ä¸ªé—®é¢˜ï¼Œä½†ä»ç„¶å¾—å¤åˆ¶ç²˜è´´ï¼Œèƒ½ä¸èƒ½æŠŠè¿™ä¸ªå‡½æ•°ç»™ä¸€èˆ¬åŒ–ï¼Œä»æ ¹æºä¸Šè§£å†³é—®é¢˜æï¼Ÿ

   ![](https://s2.loli.net/2023/04/14/xJfgFth1wOmLb5I.png)

2. **æ¨¡æ¿å‡½æ•°ï¼ˆTemplate Functionsï¼‰**

   ![](https://s2.loli.net/2023/04/14/9zcsDjKper6XuOI.png)

   å…¶ä¸­typenameå¯ä»¥è®¾å®šé»˜è®¤å‚æ•°ï¼Œå³å†™æˆtemplate<typename Type=int>

   åœ¨å®ä¾‹åŒ–ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥æ˜¾å¼å®šä¹‰Type

   ```cpp
   cout << myMin<int>(3, 4) << endl;
   ```

   å½“ç„¶ï¼Œå®ƒè¿˜å¯ä»¥æ›´èªæ˜â€”â€”æˆ‘ä»¬éšå¼å£°æ˜å˜é‡ï¼Œè®©ç¼–è¯‘å™¨è‡ªå·±æ¨æ–­

   ```cpp
   template <typename T, typename U>
   auto smarterMyMin(T a, U b)
   {
   	return a < b ? a : b;
   }
   
   cout << smarterMyMin(3.2, 4) << endl;
   ```

   {% note warning%} 

   ğŸ’¡ PS. æ³¨æ„ï¼šæ¨¡æ¿ç±»å’Œæ¨¡æ¿å‡½æ•°éƒ½æ˜¯åœ¨ä½¿ç”¨ï¼ˆå³å®ä¾‹åŒ–ï¼‰ä¹‹åæ‰ä¼šç¼–è¯‘ï¼ä¸ç”¨å°±ä¸ç¼–è¯‘ã€‚ è€Œä¸åŒçš„å®ä¾‹åŒ–ç¼–è¯‘å‡ºçš„ç»“æœä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥å…¶å®æ˜¯ç¼–è¯‘å™¨å¸®ä½ å®Œæˆäº†â€œå¤åˆ¶ç²˜è´´å¤šä¸ªç‰ˆæœ¬â€è¿™ä¸€æ­¥ã€‚

   {% endnote %}

   

# Lecture10ã€Lambda Functions

```cpp
#include <algorithm>
#include <cmath>

void abssort(float* x, unsigned n) {
    std::sort(x, x + n,
        // Lambda expression begins
        [](float a, float b) {
            return (std::abs(a) < std::abs(b));
        } // end of lambda expression
    );
}
```

![](https://s2.loli.net/2023/04/14/N5Y3hbXFqJDOmaU.png)

**æ•è·åˆ—è¡¨çš„ä½œç”¨ï¼š**

1. [ ]æ˜¯lambdaå¼•å‡ºç¬¦ï¼Œç¼–è¯‘å™¨æ ¹æ®è¯¥å¼•å‡ºç¬¦åˆ¤æ–­æ¥ä¸‹æ¥çš„ä»£ç æ˜¯å¦æ˜¯lambdaå‡½æ•°
2. æ•æ‰ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ä¾›lambdaä½¿ç”¨

**æ•è·åˆ—è¡¨ä½¿ç”¨ï¼š**

- [ ]è¡¨ç¤ºä¸æ•è·ä»»ä½•å˜é‡
- [var]ã€[&var]åˆ†åˆ«è¡¨ç¤ºä»¥å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„æ–¹å¼æ•æ‰å˜é‡var
- [=]ã€[&]åˆ†åˆ«è¡¨ç¤ºä»¥å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æ–¹å¼æ•è·æ‰€æœ‰**çˆ¶ä½œç”¨åŸŸ**çš„å˜é‡

```cpp
int index = 1;
int num = 100;
auto function = ([]()
		{num = 1000;
		index = 2;
		std::cout << "index: "<< index << ", " 
            << "num: "<< num << std::endl; });

	function();
//æŠ¥é”™ï¼Œå› ä¸ºæ²¡å»æ•è·numå’Œindexå°±åœ¨ä½¿ç”¨å®ƒä»¬

int index = 1;
int num = 100;
auto function = ([=]()
		{num = 1000;
		index = 2;
		std::cout << "index: "<< index << ", " 
            << "num: "<< num << std::endl; });

	function();
//æŠ¥é”™ï¼Œå› ä¸ºlambdaçš„å€¼å¼•ç”¨é»˜è®¤ä¸èƒ½ä¿®æ”¹ï¼Œè¦ä¿®æ”¹çš„è¯å¾—åŠ mutableå…³é”®å­—

int index = 1;
int num = 100;
auto function = ([=]()mutable
		{num = 1000;
		index = 2;
		std::cout << "index: "<< index << ", " 
            << "num: "<< num << std::endl; });

	function();
//æ­£ç¡®ï¼Œå› ä¸ºåŠ äº†mutableå…³é”®å­—ï¼Œå€¼ä¼ é€’å˜é‡å¯ä¿®æ”¹ï¼ˆä½†æ”¹çš„ä¹Ÿæ˜¯å‰¯æœ¬ï¼Œä¸å½±å“åŸå€¼ï¼‰

int index = 1;
int num = 100;
auto function = ([&]()
		{num = 1000;
		index = 2;
		std::cout << "index: "<< index << ", " 
            << "num: "<< num << std::endl; });

	function();
//æ­£ç¡®ï¼Œå¼•ç”¨ä¼ é€’çš„å€¼å¯ä»¥ä¿®æ”¹
```

ä»¥ä¸Šè¿°ä»£ç ä¸ºä¾‹ï¼Œæ€è€ƒLambdaçš„æ„ä¹‰ï¼ˆå’Œæ™®é€šå‡½æ•°ç›¸æ¯”ï¼‰ï¼š

1. çœå»å®šä¹‰ä¸€ä¸ªå®Œæ•´å‡½æ•°ã€ç»™å‡½æ•°å‘½åçš„è¿‡ç¨‹ï¼Œå¯¹äºè¿™ç§**ä¸éœ€è¦å¤ç”¨**ï¼Œä¸”**çŸ­å°**çš„å‡½æ•°ï¼Œç›´æ¥ä¼ é€’å‡½æ•°ä½“å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚æ‰€ä»¥lambdaå‡½æ•°åˆå«â€œåŒ¿åå‡½æ•°â€ã€‚

   

   {% note warning%} 

   ğŸ’¡ PS. ä¸è¦å°çœ‹â€œçœç•¥å‘½åâ€è¿™ä»¶äº‹ï¼Œè¡¨é¢ä¸Šçœ‹å®ƒåªæ˜¯å°‘äº†ä¸ªåå­—ï¼Œä½†å®è´¨æ˜¯æŠŠå®ƒçœ‹ä½œä¸€ä¸ªæ™®é€šçš„â€œæ“ä½œè¿‡ç¨‹â€è€Œéâ€œå¯¹è±¡â€ã€‚å°±åƒä½ ä¼šç»™ä¸€ä¸ªå˜é‡ã€ç±»ã€å‡½æ•°å‘½åï¼Œä½†ä¸ä¼šå•ç‹¬ç»™â€œæŠŠaä¹˜ä¸Šcçš„3æ¬¡æ–¹å†åŠ 123å†é™¤321â€è¿™ç§çº¯è¿‡ç¨‹å»å‘½ä¸ªåï¼ˆé™¤éè¿™ä¸ªæ“ä½œå¤ç”¨ç‡è¶³å¤Ÿé«˜ï¼‰ï¼Œå› ä¸ºå®ƒæŠ½è±¡ç¨‹åº¦å¤ªä½ï¼Œå³ç”¨å³æ‰”ã€‚ **è€Œæ‰€æœ‰å€¼å¾—å»å‘½åçš„ä¸œè¥¿ï¼Œéƒ½åº”è¯¥æ˜¯ä¼šå¤ç”¨ä¸”æŠ½è±¡ç¨‹åº¦è¶³å¤Ÿçš„ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ç¼–ç¨‹ä¸­çš„ä¸€ç§å“²å­¦æ€æƒ³ã€‚** å¦‚ï¼šä¸€ä¸ªæ™®é€šæ“ä½œå¤ç”¨ç¨‹åº¦è¶³å¤Ÿé«˜æ—¶ï¼ˆæ¯”è¾ƒint aã€int bå¤§å°ï¼‰ï¼Œå°±æŠŠå®ƒæŠ½è±¡ä¸ºä¸€ä¸ªå‡½æ•°ï¼ˆmaxå‡½æ•°ï¼‰ï¼›è€Œè¿™ä¸ªå‡½æ•°å¤ç”¨ç‡å¤Ÿé«˜æ—¶ï¼Œå°±è¿›ä¸€æ­¥æŠ½è±¡ä¸ºtemplate function

   {% endnote %}

   

2. å…è®¸å‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡è¿›è¡Œ**ä¼ é€’**ï¼šlambdaä¹Ÿå¯ä»¥å‘½åï¼Œç„¶åå°†å…¶è¿›è¡Œä¼ é€’ã€‚è¿™ç§æ–¹å¼å’Œä¼ ç»Ÿçš„å‡½æ•°æŒ‡é’ˆæ¯”èµ·æ¥æ›´åŠ ç®€æ˜ã€‚

3. å¼•å…¥**é—­åŒ…**ï¼šé—­åŒ…æ˜¯æŒ‡å°†å½“å‰ä½œç”¨åŸŸä¸­çš„å˜é‡é€šè¿‡å€¼æˆ–è€…å¼•ç”¨çš„æ–¹å¼å°è£…åˆ°lambdaè¡¨è¾¾å¼å½“ä¸­ï¼Œæˆä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä½¿ä½ çš„lambdaè¡¨è¾¾å¼ä»ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å˜æˆäº†ä¸€ä¸ªå¸¦éšè—å‚æ•°çš„å‡½æ•°ã€‚

   

å¸¸è§åº”ç”¨åœºæ™¯ï¼š

1. **ç”¨äºstlç®—æ³•åº“**

   ```cpp
   // for_eachåº”ç”¨å®ä¾‹
   int a[4] = {11, 2, 33, 4};
   sort(a, a+4, [=](int x, int y) -> bool { return x%10 < y%10; } );
   for_each(a, a+4, [=](int x) { cout << x << " ";} );
   ```

   

   {% note warning%} 

   ğŸ’¡ PS. foreach()è¿™ä¸ªä¸œè¥¿åœ¨#include<algorithm>é‡Œï¼Œæ˜¯ä¸ªtemplate functionï¼Œå…¶å‰ä¸¤ä¸ªå‚æ•°æ˜¯beginå’ŒendæŒ‡é’ˆ

   {% endnote %}

   

2. ***\*ç”¨äºå¤šçº¿ç¨‹åœºæ™¯\****

3. **ä½œä¸ºå‡½æ•°çš„å…¥å‚**

```cpp
using FuncCallback = std::function<void(void)>;

void DataCallback(FuncCallback callback)
{
	std::cout << "Start FuncCallback!" << std::endl;
	callback();
	std::cout << "End FuncCallback!" << std::endl;
}

auto callback_handler = [&](){
	std::cout << "This is callback_handler";
};

DataCallback(callback_handler);
```



# Lecture12ã€Specical Member Functions(6ä¸ª)

1. **ä»‹ç»ï¼š**

   C++ä¸­ç±»çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°æœ‰6ä¸ªï¼Œå¯¹äºä¸€ä¸ªç±»

   ```cpp
   class A
   {
   	public:
   	    void setData(int data) { m_data = data; }
   	    int getData(void) { return m_data; }
   	
   	private:
   	    int m_data;
   };
   ```

   ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆè¿™äº›ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥ç±»Açš„å®šä¹‰ç­‰ä»·äºå¦‚ä¸‹ï¼Œ

   ```cpp
   class A
   {
   	public:
   	    A() {}; // é»˜è®¤æ„é€ å‡½æ•°
   	    A(const A& other) { m_data = other.m_data; } // æ‹·è´æ„é€ å‡½æ•°
   	    A& operator=(const A& other) { m_data = other.m_data; return *this; } // æ‹·è´èµ‹å€¼æ„é€ å‡½æ•°
   	    ~A() {} // ææ„å‡½æ•°
   	    A(A&& other) { m_data = other.m_data; } // ç§»åŠ¨æ„é€ å‡½æ•°
   	    A& operator=(A&& other) { m_data = other.m_data; return *this; } // ç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°
   	
   	
   	    void setData(int data) { m_data = data; }
   	    int getData(void) { return m_data; }
   	
   	private:
   	    int m_data;
   };
   ```

2. **æ‹·è´æ„é€ å‡½æ•°ï¼ˆcopy constructorï¼‰**

   ```cpp
   #include<iostream >
   using namespace std;
   class Complex
   {
   public:
       double real, imag;
       Complex(double r, double i) {
           real= r; imag = i;
       }
   };
   int main(){
       Complex cl(1, 2);
       Complex c2 (cl);  //ç”¨æ‹·è´æ„é€ å‡½æ•°åˆå§‹åŒ–c2
       cout<<c2.real<<","<<c2.imag;  //è¾“å‡º 1,2
       return 0;
   }
   ```

   å¦‚æœç”¨æˆ·è‡ªå·±ç¼–å†™äº†å¤åˆ¶æ„é€ å‡½æ•°ï¼Œåˆ™é»˜è®¤å¤åˆ¶æ„é€ å‡½æ•°å°±ä¸å­˜åœ¨äº†

3. **æ‹·è´èµ‹å€¼æ„é€ å‡½æ•°ï¼ˆcopy assignment constructorï¼‰**

   å¯¹â€œï¼â€è¿›è¡Œé‡è½½ï¼Œä½œç”¨æ˜¯è®©ä¸¤ä¸ªå·²ç»åˆå§‹åŒ–å®Œæ¯•çš„ç±»è¿›è¡Œæ‹·è´
   
   ```CPP
   myclass A,Bï¼›
   A = Bï¼›
   ```

{% note warning%} 

â€‹	ğŸ’¡ PS. ä¸Šè¿°ä¸¤ä¸ªæ„é€ å‡½æ•°çš„åº”ç”¨å…¶å®éƒ½éå¸¸éå¸¸å¹¿æ³› â€”â€” åˆ«å¿˜äº†ï¼Œstlçš„å®¹å™¨å…¨éƒ½æ˜¯ç±»ï¼ vector<int>nums1 = nums2ä¹Ÿç”¨äº†æ‹·è´èµ‹å€¼æ„é€ å‡½æ•°ï¼

{% endnote %}

4. **æ·±æ‹·è´ä¸æµ…æ‹·è´**

- å¤§éƒ¨åˆ†æ­£å¸¸æƒ…å†µä¸‹åªéœ€è¦æµ…æ‹·è´ï¼ˆå¦‚åŸºæœ¬æ•°æ®ç±»å‹ã€ç®€å•çš„ç±»ï¼‰ï¼Œint A = Bï¼Œå°±æ˜¯Bæ‰€åœ¨å†…å­˜ä¸­çš„æ•°æ®æŒ‰äºŒè¿›åˆ¶ä½ï¼ˆbitï¼‰å¤åˆ¶åˆ°Aæ‰€åœ¨çš„å†…å­˜

- æ·±æ‹·è´ç”¨äºä»€ä¹ˆæƒ…å†µæï¼Ÿå‡è®¾æœ‰æŸä¸ªç±»æœ‰ä¸¤ä¸ªå®ä¾‹Aã€Bï¼Œç±»æŒæœ‰**åŠ¨æ€åˆ†é…çš„å†…å­˜/æŒ‡å‘å…¶ä»–æ•°æ®çš„æŒ‡é’ˆï¼Œ**é‚£æ­¤æ—¶å°±ä¸èƒ½ç®€å•åœ°A = Bï¼Œå¦åˆ™Aä¸­çš„æŒ‡é’ˆä¹Ÿä¼šæŒ‡å‘Bä¸­æŒ‡é’ˆå¯¹åº”çš„å†…å­˜ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä¸€ä¿®æ”¹Aï¼ŒBä¹Ÿä¼šéšä¹‹è¢«ä¿®æ”¹ï¼Œæ²¡è¾¾åˆ°æ‹·è´çš„æ•ˆæœã€‚

  æ­£ç¡®åšæ³•æ˜¯ï¼Œå»æ˜¾å¼åœ°å®šä¹‰ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼Œå®ƒé™¤äº†ä¼šå°†åŸæœ‰å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡æ‹·è´ç»™æ–°å¯¹è±¡ï¼Œè¿˜ä¼šä¸ºæ–°å¯¹è±¡å†åˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶å°†åŸæœ‰å¯¹è±¡æ‰€æŒæœ‰çš„å†…å­˜ä¹Ÿæ‹·è´è¿‡æ¥ã€‚è¿™æ ·åšçš„ç»“æœæ˜¯ï¼Œ**åŸæœ‰å¯¹è±¡å’Œæ–°å¯¹è±¡æ‰€æŒæœ‰çš„åŠ¨æ€å†…å­˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„**ï¼Œæ›´æ”¹ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®ä¸ä¼šå½±å“å¦å¤–ä¸€ä¸ªå¯¹è±¡ã€‚

{% note warning%} 

â€‹	ğŸ’¡ PS. å¦‚æœä¸€ä¸ªç±»æ‹¥æœ‰æŒ‡é’ˆç±»å‹çš„æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹å°±éœ€è¦æ·±æ‹·è´ï¼Œå› ä¸ºåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½	å°†æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹å†å¤åˆ¶å‡ºä¸€ä»½æ¥ï¼Œè®©åŸæœ‰å¯¹è±¡å’Œæ–°ç”Ÿå¯¹è±¡ç›¸äº’ç‹¬ç«‹ï¼Œå½¼æ­¤ä¹‹é—´ä¸å—å½±å“ã€‚å¦‚æœç±»çš„æˆ	å‘˜å˜é‡æ²¡æœ‰æŒ‡é’ˆï¼Œä¸€èˆ¬æµ…æ‹·è´è¶³çŸ£ã€‚

{% endnote %}

- **æ·±æ‹·è´çš„å¼€é”€å¾€å¾€æ¯”æµ…æ‹·è´å¤§**ï¼ˆé™¤éæ²¡æœ‰æŒ‡å‘åŠ¨æ€åˆ†é…å†…å­˜çš„å±æ€§ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å€¾å‘äºå°½å¯èƒ½ä½¿ç”¨æµ…æ‹·è´

  

5. **å·¦å€¼ã€å³å€¼**

   - å·¦å€¼ï¼ˆlvalueï¼‰ï¼šè¡¨è¾¾å¼ç»“æŸåä¾ç„¶å­˜åœ¨çš„æŒä¹…å¯¹è±¡

   - å³å€¼ï¼ˆrvalueï¼‰ï¼šè¡¨è¾¾å¼ç»“æŸåå°±ä¸å†å­˜åœ¨çš„ä¸´æ—¶å¯¹è±¡ã€‚å­—é¢é‡ï¼ˆå­—ç¬¦å­—é¢é‡é™¤å¤–ï¼‰ã€ä¸´æ—¶çš„è¡¨è¾¾å¼å€¼ã€ä¸´æ—¶çš„å‡½æ•°è¿”è¿˜å€¼è¿™äº›çŸ­æš‚å­˜åœ¨çš„å€¼éƒ½æ˜¯å³å€¼ã€‚

   æ›´ç›´è§‚çš„ç†è§£æ˜¯ï¼šæœ‰å˜é‡åçš„å¯¹è±¡éƒ½æ˜¯å·¦å€¼ï¼Œæ²¡æœ‰å˜é‡åçš„éƒ½æ˜¯å³å€¼ã€‚ï¼ˆå› ä¸ºæœ‰æ— å˜é‡åæ„å‘³ç€è¿™ä¸ªå¯¹è±¡æ˜¯å¦åœ¨ä¸‹ä¸€è¡Œä»£ç æ—¶ä¾ç„¶å­˜åœ¨ï¼‰


â€‹	{% note warning%} 

â€‹	ğŸ’¡ PS. å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå­—ç¬¦å­—é¢é‡æ˜¯å”¯ä¸€ä¸å¯ç®—å…¥å³å€¼çš„å­—é¢é‡ï¼Œå› ä¸ºå®ƒå®é™…å­˜å‚¨åœ¨é™æ€å†…å­˜åŒºï¼Œæ˜¯æŒä¹…å­˜åœ¨çš„

â€‹	{% endnote %}

6. **å³å€¼å¼•ç”¨**

   å³å€¼å¼•ç”¨ç±»å‹ &&ç”¨äºåŒ¹é…å³å€¼ï¼Œå·¦å€¼å¼•ç”¨&ç”¨äºåŒ¹é…å·¦å€¼

   ```cpp
   //å·¦å€¼å¼•ç”¨å½¢å‚=>åŒ¹é…å·¦å€¼
   void Vector::Copy(Vector& v){
       this->num = v.num;
       this->a = new int[num];
       for(int i=0;i<num;++i){a[i]=v.a[i]}
   }
   
   //å³å€¼å¼•ç”¨å½¢å‚=>åŒ¹é…å³å€¼
   void Vector::Copy(Vector&& temp){
       this->num = temp.num;
       this->a = temp.a;
   }
   ```

   ä¸€ä¸ªå¯¹åº”å…³ç³»ï¼š

   å·¦å€¼ â€”â€” å·¦å€¼å¼•ç”¨ â€”â€” æ·±æ‹·è´

   å³å€¼ â€”â€” å³å€¼å¼•ç”¨ â€”â€” æµ…æ‹·è´

   è¿™å’Œæ·±æµ…æ‹·è´çš„å®šä¹‰æ˜¯ç›¸ç¬¦çš„ï¼Œå› ä¸ºå³å€¼ä¸´æ—¶å­˜åœ¨ï¼Œç”¨å®Œå°±ä¸¢ï¼Œæ‰€ä»¥å°±ä¸å­˜åœ¨æ‹·è´ä¹‹ååŠ¨æ€åˆ†é…å†…å­˜å†²çªçš„é—®é¢˜ï¼Œé‚£å°±åªéœ€è¦æµ…æ‹·è´ï¼›å·¦å€¼åä¹‹

   

7. **å¼ºè½¬å³å€¼std::move()**

   ```cpp
   void func(){
       Vector result;
       //...DoSomething with result
   
       if(xxx){ans = result;}  
   		//ç°åœ¨æˆ‘å¸Œæœ›æŠŠç»“æœæå–åˆ°å¤–éƒ¨çš„å˜é‡ansä¸Š
   		
   		//...Do other things without result
       return;
   }
   ```

   resultèµ‹å€¼ç»™ansåå°±ä¸å†è¢«ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬æœŸæœ›å®ƒè°ƒç”¨çš„æ˜¯**ç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°**ã€‚ ä½†æ˜¯resultæ˜¯ä¸€ä¸ªæœ‰å˜é‡åçš„å·¦å€¼ç±»å‹ï¼Œå› æ­¤ans = result è°ƒç”¨çš„æ˜¯æ‹·è´èµ‹å€¼æ„é€ å‡½æ•°è€Œéç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°

   è§£å†³åŠæ³•ï¼šç”¨c++11æä¾›çš„moveå¼ºè½¬å³å€¼

   ```cpp
   void func(){
       Vector result;
       //...DoSomething with result
   	   
   		if(xxx){ans = std::move(result);}   
   		//è°ƒç”¨çš„æ˜¯ç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°
   		
   		//...Do other things without result
       return;
   }
   ```

8. **å³å€¼å¼•ç”¨ç±»å‹å’Œå³å€¼çš„å…³ç³»**

   ```cpp
   void test(int& o) {std::cout << "ä¸ºå·¦å€¼ã€‚" << std::endl;}
   void test(int&& temp) {std::cout << "ä¸ºå³å€¼ã€‚" << std::endl;}
   
   int main(){
     int a;
   	int&& b = 10;
     //è¯·åˆ†åˆ«å›ç­”ï¼šaã€std::move(a)ã€b åˆ†åˆ«æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Ÿ
   	test(a);
   	test(std::move(a));
   	test(b);
   }
   ```

   ç­”ï¼šaæ˜¯å·¦å€¼ï¼Œstd::move(a)æ˜¯å³å€¼ï¼Œä½†bå´æ˜¯å·¦å€¼ã€‚

   åœ¨è¿™é‡Œbè™½ç„¶æ˜¯ int&& ç±»å‹ï¼Œä½†å´å› ä¸ºæœ‰å˜é‡åï¼ˆå³å¯æŒä¹…å­˜åœ¨ï¼‰ï¼Œè¢«ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯å·¦å€¼ã€‚

   **ç»“è®ºï¼šå³å€¼å¼•ç”¨ç±»å‹åªæ˜¯ç”¨äºåŒ¹é…å³å€¼ï¼Œè€Œå¹¶éè¡¨ç¤ºä¸€ä¸ªå³å€¼ã€‚å› æ­¤ï¼Œå°½é‡ä¸è¦å£°æ˜å³å€¼å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œè€Œåªåœ¨å‡½æ•°å½¢å‚ä½¿ç”¨å®ƒä»¥åŒ¹é…å³å€¼ã€‚**

   

9. **è¡¥å……ï¼šæ„é€ å‡½æ•°ä¹‹åçš„å†’å·**

   c++çš„è¯­æ³•ç‰¹æ€§ï¼Œå†’å·åé¢è·Ÿçš„æ˜¯èµ‹å€¼

   ```cpp
   A(int aa, int bb):a(aa), b(bb) {}
   
   //ç›¸å½“äº
   A(int aa, int bb)
   {
   	a=aa;
   	b=bb;
   }
   ```


# Lecture13ã€RAII and Smartpointer

1. **motivation**

   æ‰‹åŠ¨ç”³è¯·åŠ¨æ€å†…å­˜+æ‰‹åŠ¨é‡Šæ”¾ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ

   ```cpp
   Person* p = new Person(id_number);
   
   //do something
   
   delete p;
   ```

   è‹¥åœ¨ç”³è¯·å®Œå†…å­˜ä¹‹åï¼Œdo somethingçš„è¿‡ç¨‹ä¸­ç”¨æŠ›å‡ºäº†å¼‚å¸¸ï¼ˆthrow an exceptionï¼‰ï¼Œé‚£å°±æ— æ³•æ‰§è¡Œdelete pï¼Œä»è€Œé€ æˆå†…å­˜æ³„æ¼ï¼ˆleak memoryï¼‰ã€‚ æ­¤é—®é¢˜è¿˜ä¸æ­¢æ˜¯æŒ‡é’ˆï¼Œæ–‡ä»¶çš„openå’Œcloseã€çº¿ç¨‹çš„try_lockå’Œunlockã€å¥—æ¥å­—çš„socketå’Œcloseï¼Œéƒ½æ˜¯è¿™æ ·çš„â€œé…å¥—æ“ä½œâ€ï¼Œ

   ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨RAIIï¼ˆResource Acquisition is Initalizationï¼‰åŸåˆ™ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š

   - **All resources used by a class should be acquired in the constructor**
   - **All resources used by a class should be released in the destructor**

   å³key ideaæ˜¯åˆ©ç”¨**â€œå¯¹è±¡çš„ææ„æ˜¯è‡ªåŠ¨å®Œæˆçš„â€** â€”â€” ç”±äºå¯¹è±¡åœ¨go out of its own scopeåï¼Œææ„å‡½æ•°æ€»æ˜¯ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œé‚£ä¹ˆåªè¦éµå¾ªä¸Šé¢ä¸¤ç‚¹åŸåˆ™ï¼Œå°±å¯ä»¥é¿å…å†…å­˜æ³„æ¼äº†

2. **å®ä¾‹**

   ```cpp
   #include <iostream>
   #include <memory>
    
    
   int main()
   {
   	for (int i = 1; i <= 10000000; i++)
   	{
   		int32_t *ptr = new int32_t[3];
   		ptr[0] = 1;
   		ptr[1] = 2;
   		ptr[2] = 3;
   		//delete ptr;     //å‡è®¾å¿˜è®°äº†é‡Šæ”¾å†…å­˜
   	}
   	system("pause");
   	return 0;
   }
   ```

   å¯æƒ³è€ŒçŸ¥ä¼šå æ®æå¤§çš„å†…å­˜ç©ºé—´

   æˆ‘ä»¬å°†å…¶æ”¹è¿›ä¸ºï¼š

   ```cpp
   #include <iostream>
   #include <memory>
    
   template<typename T>
   class auto_release_ptr
   {
   	public:
   		auto_release_ptr(T *t) :_t(t){};
   		~auto_release_ptr()
   		{
   			delete _t;
   		};
   	 
   		T * getPtr()
   		{
   			return _t;
   		}
   	 
   	private:
   		T *_t;
   };
    
   int main()
   {
   	for (int i = 1; i <= 10000000; i++)
   	{
   		auto arp = auto_release_ptr<int32_t>(new int32_t[3]);
   		int32_t *ptr = arp.getPtr();
   		ptr[0] = 1;
   		ptr[1] = 2;
   		ptr[2] = 3;
   	}
   	system("pause");
   	return 0;
   }
   ```

   **æ€è·¯ï¼š**å°†ç”³è¯·çš„intæŒ‡é’ˆæ‰˜ç®¡ç»™æ¨¡æ¿ç±»auto_release_ptrï¼Œå†å»å£°æ˜ä¸€ä¸ªæ™®é€šintæŒ‡é’ˆæŒ‡å‘ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼ˆé€šè¿‡æ¥æ”¶ç±»æˆå‘˜å‡½æ•°çš„è¿”å›å€¼å®ç°ï¼‰ï¼Œä»è€Œè®©ptr ä¸ auto_release_ptr æ‹¥æœ‰äº†ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¯æ¬¡forå¾ªç¯è‡ªåŠ¨ææ„é‡Šæ”¾ï¼Œéå¸¸å¦™ã€‚

3. **æ™ºèƒ½æŒ‡é’ˆ**

   **ï¼ˆ1ï¼‰std : : unique_ptr**

   ```cpp
   //æ™®é€šæŒ‡é’ˆ
   void raw_ptr_fun(){
   	Node* n = new Node;
   	//do things with n 
   	delete n;
   }
   
   //æ™ºèƒ½æŒ‡é’ˆ
   void smart_ptr_fun(){
   	std::unique_ptr<Node> n(new node);
   	//do things with n 
   	//automatically freed!
   }
   ```

   **ç‰¹ç‚¹ï¼š**

   - æ— æ³•è¿›è¡Œå·¦å€¼çš„èµ‹å€¼æˆ–èµ‹å€¼æ„é€ ï¼Œä½†å…è®¸ä¸´æ—¶å³å€¼èµ‹å€¼æ„é€ å’Œèµ‹å€¼ï¼ˆç”¨moveè¯­ä¹‰ï¼‰

   ```cpp
   unique_ptr<string> p1(new string("I'm Li Ming!"));
   unique_ptr<string> p2(new string("I'm age 22."));
   	
   cout << "p1ï¼š" << p1.get() << endl;
   cout << "p2ï¼š" << p2.get() << endl;
   
   //p1 = p2;					// errorï¼ç¦æ­¢å·¦å€¼èµ‹å€¼
   //unique_ptr<string> p3(p2);	// errorï¼ç¦æ­¢å·¦å€¼èµ‹å€¼æ„é€ 
   
   unique_ptr<string> p3(std::move(p1));
   p1 = std::move(p2);	// ä½¿ç”¨moveæŠŠå·¦å€¼è½¬æˆå³å€¼å°±å¯ä»¥èµ‹å€¼äº†
   
   cout << "p1 = p2 èµ‹å€¼åï¼š" << endl;
   cout << "p1ï¼š" << p1.get() << endl;
   cout << "p2ï¼š" << p2.get() << endl;
   ```

   ![](https://s2.loli.net/2023/04/14/SjMudQh6KBbCa21.png)

   {% note warning%} 

   ğŸ’¡ PS. åœ¨è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒæŠŠp2 moveæˆä¸´æ—¶å€¼ä¹‹åï¼Œä¸€èµ‹å€¼ç»™p1ï¼Œå®ƒå°±è¢«é‡Šæ”¾æ‰äº†ï¼Œå†…å­˜åœ°å€ä¸ºnullptr

   {% endnote %}

   

   - æ’å®ƒå¼èµ„æºäº«ç”¨ï¼šä¸¤ä¸ªæŒ‡é’ˆä¸èƒ½æŒ‡å‘åŒä¸€ä¸ªèµ„æº

   ```cpp
   unique_ptr<string> p1;
   string *str = new string("æ™ºèƒ½æŒ‡é’ˆçš„å†…å­˜ç®¡ç†é™·é˜±");
   p1.reset(str);	// p1æ‰˜ç®¡stræŒ‡é’ˆ
   {
   	unique_ptr<string> p2;
   	p2.reset(str);	// p2æ¥ç®¡stræŒ‡é’ˆæ—¶ï¼Œä¼šå…ˆå–æ¶ˆp1çš„æ‰˜ç®¡ï¼Œç„¶åå†å¯¹strçš„æ‰˜ç®¡
   	cout << "p2:" <<  *p2 << endl;
   }
   
   // æ­¤æ—¶p1å·²ç»æ²¡æœ‰æ‰˜ç®¡å†…å®¹æŒ‡é’ˆäº†ï¼Œä¸ºNULLï¼Œåœ¨ä½¿ç”¨å®ƒå°±ä¼šå†…å­˜æŠ¥é”™ï¼
   cout << "p1:" << *p1 << endl;
   ```

   ![](https://s2.loli.net/2023/04/14/R8OfldcxjaFIHEV.png)

   

   **ï¼ˆ2ï¼‰std : : shared_ptr**

   **idea:** è®°å½•å¼•ç”¨ç‰¹å®šå†…å­˜å¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆæ•°é‡ï¼Œå½“å¤åˆ¶æˆ–æ‹·è´æ—¶ï¼Œ**å¼•ç”¨è®¡æ•°åŠ 1**ï¼Œå½“æ™ºèƒ½æŒ‡é’ˆææ„æ—¶ï¼Œ**å¼•ç”¨è®¡æ•°å‡1**ï¼Œå¦‚æœè®¡æ•°ä¸ºé›¶ï¼Œä»£è¡¨å·²ç»æ²¡æœ‰æŒ‡é’ˆæŒ‡å‘è¿™å—å†…å­˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±é‡Šæ”¾å®ƒ

   ```cpp
   class Person {
   public:
   	Person() {
   		cout << "æ„é€ å‡½æ•° \\t " << endl;
   	}
   
   	~Person() {
   		cout << "ææ„å‡½æ•° \\t " << endl;
   	}
   
   };
   
   int main()
   {
   	shared_ptr<Person> sp1;
   
   	shared_ptr<Person> sp2(new Person());
   
   	// è·å–æ™ºèƒ½æŒ‡é’ˆç®¡æ§çš„å…±äº«æŒ‡é’ˆçš„æ•°é‡	use_count()ï¼šå¼•ç”¨è®¡æ•°
   	cout << "sp1	use_count() = " << sp1.use_count() << endl;
   	cout << "sp2	use_count() = " << sp2.use_count() << endl << endl;
   
   	// å…±äº«,å³sp1å’Œsp2å…±åŒæ‰˜ç®¡åŒä¸€ä¸ªæŒ‡é’ˆ
   	sp1 = sp2;
   
   	cout << "sp1	use_count() = " << sp1.use_count() << endl;
   	cout << "sp2	use_count() = " << sp2.use_count() << endl << endl;
   
   	shared_ptr<Person> sp3(sp1);
   	cout << "sp1	use_count() = " << sp1.use_count() << endl;
   	cout << "sp2	use_count() = " << sp2.use_count() << endl;
   	cout << "sp2	use_count() = " << sp3.use_count() << endl;
   	
   	return 0;
   }
   ```

   ![](https://s2.loli.net/2023/04/14/cK9a5qX7MnjQHlv.png)

   

   **ï¼ˆ3ï¼‰std : : weak_ptr**

   â€‹	TO-DO

   

4. **æ™ºèƒ½æŒ‡é’ˆåˆå§‹åŒ–æ–¹å¼**

   å¸¸è§„åˆå§‹åŒ–æ–¹å¼æœ‰ä¸¤ç§ï¼šæ˜¾å¼è°ƒç”¨newã€ä½¿ç”¨make_unique()å‡½æ•°

![](https://s2.loli.net/2023/04/14/dIVEwpKhf47G5aH.png)

**Q:** Which is betterï¼Ÿ

**A:** std : : make_uniqueå’Œstd : : make_sharedæ›´å¥½ï¼Œå› ä¸º**æ˜¾å¼è°ƒç”¨newä¼šåˆ†é…ä¸¤æ¬¡å†…å­˜**ï¼ˆä¸€æ¬¡ç»™upï¼Œä¸€æ¬¡æ˜¯new Tï¼‰

------

# Assignmentï¼šHashMap

1. **usingå…³é”®å­—**

   å¯ç”¨äºè®¾ç½®åˆ«åï¼ŒåŠŸèƒ½ç±»ä¼¼äºtypedef

   ```cpp
   using value_type = std::pair<const K, M>;
   ```

2. **explicitå…³é”®å­—**

   ä¿®é¥°classçš„constructorï¼Œä»¤å…¶åªèƒ½æ˜¾å¼å£°æ˜ï¼Œä¸èƒ½éšå¼è½¬æ¢orèµ‹å€¼åˆå§‹åŒ–

   ```cpp
   explicit HashMap(size_t bucket_count, const H& hash = H());
    
   HashMap<int, int> map(1.0);  // double -> int conversion not allowed.
   HashMap<int, int> map = 1;   // copy-initialization, does not compile.
   ```

3. **æˆå‘˜å‡½æ•°æœ«å°¾åŠ const â€”â€” å¸¸æˆå‘˜å‡½æ•°**

   constæˆå‘˜å‡½æ•°å¯ä»¥ä½¿ç”¨ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹å®ƒä»¬çš„å€¼ï¼Œè¿™ç§æªæ–½ä¸»è¦ç›®çš„è¿˜æ˜¯ä¿æŠ¤æ•°æ®ã€‚é€šå¸¸å°† getç±»å‹çš„å‡½æ•°ï¼ˆget_valueã€get_sizeã€‚ã€‚ï¼‰è®¾ç½®ä¸ºå¸¸æˆå‘˜å‡½æ•°ã€‚

   ```cpp
   inline size_t size() const noexcept;
   inline bool empty() const noexcept;
   ```

   â€‹	

   {% note warning%} 

   ğŸ’¡ PS.
   1. éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œå¿…é¡»åœ¨æˆå‘˜å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰å¤„åŒæ—¶åŠ ä¸Š const å…³é”®å­—ã€‚`char *getname() const`å’Œ`char *getname()`æ˜¯ä¸¤ä¸ªä¸åŒçš„å‡½æ•°åŸå‹ï¼Œå¦‚æœåªåœ¨ä¸€ä¸ªåœ°æ–¹åŠ  const ä¼šå¯¼è‡´å£°æ˜å’Œå®šä¹‰å¤„çš„å‡½æ•°åŸå‹å†²çªã€‚
   2. åŒºåˆ†ä¸€ä¸‹ const çš„ä½ç½®ï¼š
      - å‡½æ•°å¼€å¤´çš„ const ç”¨æ¥ä¿®é¥°å‡½æ•°çš„è¿”å›å€¼ï¼Œè¡¨ç¤ºè¿”å›å€¼æ˜¯ const ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è¢«ä¿®æ”¹ï¼Œä¾‹å¦‚`const char * getname()`
      - å‡½æ•°å¤´éƒ¨çš„ç»“å°¾åŠ ä¸Š const è¡¨ç¤ºå¸¸æˆå‘˜å‡½æ•°ï¼Œè¿™ç§å‡½æ•°åªèƒ½è¯»å–æˆå‘˜å˜é‡çš„å€¼ï¼Œè€Œä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ï¼Œä¾‹å¦‚`char * getname() const`

   {% endnote %}

   

4. **noexceptå…³é”®å­—**

   ç¨‹åºå‘˜åœ¨è¯­ä¹‰å±‚é¢å£°æ˜â€œæˆ‘ä¿è¯è¿™ä¸ªå‡½æ•°ä¸ä¼šå¼‚å¸¸ï¼Œç¼–è¯‘å™¨ä½ ä¸ç”¨æ£€æŸ¥äº†â€ï¼Œä¹‹åç¼–è¯‘å™¨å°±ä¸ä¼šå¯¹è¯¥å‡½æ•°è¿›è¡Œå¼‚å¸¸æ£€æŸ¥ï¼Œä¹Ÿæ²¡åŠæ³•å®æ–½try-catchæ“ä½œ

   ```cpp
   #include <iostream>
   using namespace std;
   
   void func_not_throw() noexcept {
       throw 1;
   		// noexceptå‡½æ•°ä¸­æœ¬ä¸åº”æœ‰throwï¼Œæ²¡æ„ä¹‰ï¼Œä½†ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥æ˜¯å¦æœ‰throw
   		// æ‰€ä»¥ç¼–è¯‘é€šè¿‡ï¼Œä¸ä¼šæŠ¥é”™ï¼ˆå¯èƒ½ä¼šæœ‰è­¦å‘Šï¼‰
   }
   
   int main() {
       try {
           func_not_throw(); // ç›´æ¥ terminateï¼Œä¸ä¼šè¢« catch
       } catch (int) {
           cout << "catch int" << endl;
       }
       return 0;
   }
   ```

5. **æ³¨æ„ï¼š**

   ```cpp
   #include <iostream>
    
   using namespace std;
    
   class CTest
   {
   public:
   	void show() const
   	{
   		cout << "const" << endl;
   	}
    
   	void show()
   	{
   		cout << "normal" << endl;
   	}
   };
    
   int main()
   {
   	CTest a;
   	a.show();
    
   	const CTest b;
   	b.show();
    
   	system("pause");
   	return 0;
   ```

   ![](https://s2.loli.net/2023/04/14/48HvQ9oENy1ksPd.png)

   è¿™ä¸¤ä¸ªshowå‡½æ•°å¯ä¸æ˜¯é‡è½½ï¼**é‡è½½å‡½æ•°çš„å½¢å‚å¿…é¡»ä¸åŒï¼ï¼**è¿™ä¿©å°±ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°åŸå‹ï¼ˆå› ä¸ºåŠ äº†constï¼Œæ˜¯å¸¸æˆå‘˜å‡½æ•°ï¼‰

   é‚£ä¹ˆè°ƒç”¨çš„æ—¶å€™å¦‚ä½•åŒºåˆ†è¿™ä¿©æï¼Ÿ

   å®ƒä»¬å„è‡ªè¢«è°ƒç”¨çš„æ—¶æœºä¸ºï¼š**å¦‚æœå®šä¹‰çš„å¯¹è±¡æ˜¯å¸¸å¯¹è±¡ï¼Œåˆ™è°ƒç”¨çš„æ˜¯constæˆå‘˜å‡½æ•°ï¼Œå¦‚æœå®šä¹‰çš„å¯¹è±¡æ˜¯éå¸¸å¯¹è±¡ï¼Œåˆ™è°ƒç”¨é‡è½½çš„éconstæˆå‘˜å‡½æ•°ã€‚**

   

   {% note warning%} 

    ğŸ’¡ PS. ä¸è¿‡ä»å¦ä¸€ä¸ªè§’åº¦æ¥ç†è§£ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒä¿©çœ‹æˆé‡è½½ â€”â€” é¦–å…ˆç†è§£ä¸‹å‡½æ•°ç­¾åï¼šå®ƒåŒ…å«ç€ä¸€ä¸ªå‡½æ•°çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬**å‡½æ•°åã€å‚æ•°ç±»å‹ã€å‚æ•°ä¸ªæ•°ã€é¡ºåºä»¥åŠå®ƒæ‰€åœ¨çš„ç±»å’Œå‘½åç©ºé—´ï¼Œ**ä¸¤ä¸ªå‡½æ•°åªæœ‰åœ¨ç­¾åä¸åŒæ—¶æ‰èƒ½è¢«åŒºåˆ†ã€‚
   é‚£ä¸Šé¢ä¸¤ä¸ªshow( )çš„ç­¾ååˆ°åº•å“ªé‡Œä¸åŒäº†æï¼Ÿ ç­”æ¡ˆæ˜¯å‚æ•°ç±»å‹ï¼Œæ¯ä¸ªæˆå‘˜å‡½æ•°çš„å‚æ•°ä¸­å…¶å®è‡ªå¸¦thisæŒ‡é’ˆï¼Œåªä¸è¿‡è—èµ·æ¥äº†ï¼Œè°è°ƒç”¨æˆå‘˜å‡½æ•°ï¼Œthis å°±æŒ‡å‘è°ã€‚**è€Œæˆå‘˜å‡½æ•°å°¾å·´ä¸Šçš„constï¼Œå®è´¨ä¿®é¥°çš„æ˜¯thisæŒ‡é’ˆï¼** å½“aè°ƒç”¨showæ–¹æ³•æ—¶ï¼Œå‡½æ•°ç­¾åä¸ºshow(a){}ï¼Œå³aä¼ ç»™thisæŒ‡é’ˆï¼Œä¸€çœ‹ï¼Œè¯¶ï¼aä¸ºéå¸¸å¯¹è±¡ï¼Œå¯¹åº”æ™®é€šthisæŒ‡é’ˆï¼Œå³éconstç‰ˆæœ¬çš„show()ï¼›båŒç†ã€‚

   {% endnote %}

   

6. **typenameå…³é”®å­—ä½œç”¨**

   ```cpp
   template <typename Map, bool IsConst>
   typename HashMapIterator<Map, IsConst>::reference HashMapIterator<Map, IsConst>::operator*() const {
       return _node->value; 
   }
   ```

   - ä½œä¸ºç±»å‹å£°æ˜ï¼Œæ•ˆæœå®Œå…¨ç­‰åŒäºclass â€”â€” ä»£ç ä¸­çš„typename Mapç­‰åŒäºclass Mapï¼Œå®ƒä¿©éƒ½æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œâ€œæˆ‘åé¢è·Ÿç€çš„è¿™ä¸ªæ˜¯ä¸ªç±»å‹åç§°ï¼Œè€Œä¸æ˜¯æˆå‘˜å˜é‡æˆ–æˆå‘˜å‡½æ•°â€ã€‚ï¼ˆè¿™å¥½åƒä¹Ÿèƒ½æ˜ è¯â€œæ¨¡æ¿å‡½æ•°åœ¨å®ä¾‹åŒ–åæ‰ä¼šè¢«ç¼–è¯‘â€ï¼‰

   - ä½œä¸º**ä¿®é¥°å…³é”®å­—ï¼š**

     ```cpp
     template<typename T>
     void fun(const T& proto){
         T::const_iterator it(proto.begin());
     }
     ```

     **motivationï¼š**è™½ç„¶äººç±»ç¼–ç¨‹è€…ä¸€çœ¼å°±çŸ¥é“const_iteratoræ˜¯ä¸ªç±»å‹åç§°ï¼Œä½†ç¼–è¯‘å™¨ä¸çŸ¥é“å‘€ï¼Œä¸‡ä¸€å®ƒæ˜¯ä¸ªå˜é‡å‘¢ï¼Ÿåœ¨æ¨¡æ¿å®ä¾‹åŒ–ä¹‹å‰ï¼Œå®Œå…¨æ²¡æœ‰åŠæ³•æ¥åŒºåˆ†å®ƒä»¬ï¼Œæ‰€ä»¥è¿™ä¸ªå†™æ³•æ˜¯ä¼šerrorçš„ï¼ æ€ä¹ˆåŠæï¼Ÿ è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨typenameå…³é”®å­—æ¥ä¿®é¥°ï¼Œç¼–è¯‘å™¨æ‰ä¼šå°†è¯¥åç§°å½“æˆæ˜¯ç±»å‹

     ```cpp
     typename T::const_iterator it(proto.begin());
     ```

     è¿™æ ·ç¼–è¯‘å™¨å°±å¯ä»¥ç¡®å®šT: :const_iteratoræ˜¯ä¸€ä¸ªç±»å‹ï¼Œè€Œä¸å†éœ€è¦ç­‰åˆ°å®ä¾‹åŒ–æ—¶æœŸæ‰èƒ½ç¡®å®šï¼Œå› æ­¤æ¶ˆé™¤äº†å‰é¢æåˆ°çš„æ­§ä¹‰ã€‚

     {% note warning%} 

     ğŸ’¡ PS. æ€»ç»“ï¼šåŒæ—¶ä½¿ç”¨æ¨¡æ¿ç±»Tå’ŒåŸŸè§£æç¬¦: : æ—¶ï¼Œå°±å¾—åŠ typename
     
     {% endnote %}
     
     

7. æ¨¡æ¿ç±»ä¸­çš„æˆå‘˜å‡½æ•°ï¼ˆå¾€å¾€ä¹Ÿæ˜¯æ¨¡æ¿å‡½æ•°ï¼‰çš„å…·ä½“å®ç°é€šå¸¸ä¹Ÿä¼šæ”¾åœ¨.hä¸­ï¼Œé™¤éå‡½æ•°å¤ªå¤šå¤ªé•¿

8. ä¸¤ä¸ªæŒ‡é’ˆç›¸å‡ = ä¸¤æŒ‡é’ˆçš„åœ°å€å·®å€¼/sizeof(æ•°æ®ç±»å‹)ï¼Œå³å¾—åˆ°çš„ç»“æœå°±æ˜¯ä¸¤æŒ‡é’ˆä¹‹é—´é—´éš”çš„å…ƒç´ ä¸ªæ•°

   æ³¨æ„ï¼š ä¸éœ€è¦äººä¸ºæ‰‹åŠ¨å»é™¤sizeofå“ˆï¼å‡å·è‡ªåŠ¨ä¼šå®Œæˆè¿™ä¸ªæ“ä½œï¼ˆcå’Œcppä¸­éƒ½æ˜¯ï¼‰

9. **è¿ç®—ç¬¦é‡è½½**

   ```cpp
   #include <iostream>
   #include <iomanip>
   using namespace std;
   
   //ç§’è¡¨ç±»
   class stopwatch{
   public:
       stopwatch(): m_min(0), m_sec(0){ }
   public:
       void setzero(){ m_min = 0; m_sec = 0; }
       stopwatch run();  // è¿è¡Œ
       stopwatch operator++();  //++iï¼Œå‰ç½®å½¢å¼
       stopwatch operator++(int n);  //i++ï¼Œåç½®å½¢å¼
       friend ostream & operator<<( ostream &, const stopwatch &);
   private:
       int m_min;  //åˆ†é’Ÿ
       int m_sec;  //ç§’é’Ÿ
   };
   
   stopwatch stopwatch::run(){
       ++m_sec;
       if(m_sec == 60){
           m_min++;
           m_sec = 0;
       }
       return *this;
   }
   
   stopwatch stopwatch::operator++(){
       return run();
   }
   
   stopwatch stopwatch::operator++(int n){
       stopwatch s = *this;
       run();
       return s;
   }
   
   ostream &operator<<( ostream & out, const stopwatch & s){
       out<<setfill('0')<<setw(2)<<s.m_min<<":"<<setw(2)<<s.m_sec;
       return out;
   }
   
   int main(){
       stopwatch s1, s2;
   
       s1 = s2++;
       cout << "s1: "<< s1 <<endl;
       cout << "s2: "<< s2 <<endl;
       s1.setzero();
       s2.setzero();
   
       s1 = ++s2;
       cout << "s1: "<< s1 <<endl;
       cout << "s2: "<< s2 <<endl;
   
       return 0;
   }
   ```

   C++è¿ç®—ç¬¦é‡è½½ï¼Œæœ¬è´¨ä¸Šç­‰äºå®šä¹‰ä¸€ä¸ªæˆå‘˜å‡½æ•°(å®é™…ä¸Šä¹Ÿå¯èƒ½æ˜¯å…¨å±€å‡½æ•°)ã€‚ä¾‹å¦‚a+bï¼Œæœ¬è´¨ä¸Šç­‰åŒäºè°ƒç”¨å‡½æ•°**ã€Œa.operator+(b)ã€**ï¼Œè¯¥å‡½æ•°çš„åå­—å«ã€Œoperator+ã€ ++çš„é‡è½½åˆ†ä¸ºå‰ç½®å’Œåç½®æƒ…å†µï¼Œa = ++b;(å‰ç½®)ï¼Œ a = b++;(åç½®)ã€‚å› ä¸ºç¬¦å·ä¸€æ ·ï¼Œæ‰€ä»¥ç»™åç½®ç‰ˆæœ¬åŠ ä¸€ä¸ªintå½¢å‚ä½œä¸ºåŒºåˆ†ï¼Œè¿™ä¸ªå½¢å‚æ˜¯0ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“ä¸­æ˜¯ç”¨ä¸åˆ°çš„ï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ†å‰ç½®åç½®ã€‚ è‡³äºä¸ºå•¥åŠ äº†ä¸ªå½¢å‚å°±èƒ½åŒºåˆ†å‰åç¼€ï¼Œæ²¡æƒ³æ‡‚ï¼Œä¹Ÿæ²¡æŸ¥åˆ°èµ„æ–™

   

10. **thisæŒ‡é’ˆ**

    ```cpp
    template <typename K, typename M, typename H>
    HashMap<K, M, H>::~HashMap() {
        clear();
    }
    ```

    è¿™é‡Œè°ƒç”¨clear()ç”¨ä¸ç”¨åŠ thisæŒ‡é’ˆï¼Ÿ ç­”æ¡ˆæ˜¯å¯åŠ å¯ä¸åŠ ï¼Œç¼–è¯‘å™¨éƒ½ä¼šéšå¼è°ƒç”¨

    Q: ä»€ä¹ˆæ—¶å€™thisæŒ‡é’ˆæ˜¯å¿…ä¸å¯å°‘çš„æï¼Ÿ 

    A: å½“ä½ åœ¨å¯¹è±¡æ–¹æ³•é‡Œéœ€è¦**æ˜ç¡®**ä½¿ç”¨è‡ªå·±çš„æ—¶å€™ï¼Œæ¯”å¦‚åŒºåˆ†åŒåçš„å½¢å‚å’Œæˆå‘˜å˜é‡

    

11. å½“ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºå¼•ç”¨ç±»å‹æ—¶ï¼Œ**ä¸è¦return æŸä¸ªåœ¨stackä¸Šçš„å˜é‡çš„å¼•ç”¨ï¼**ï¼ˆå¦åˆ™è¯¥å‡½æ•°ä¸€é€€å‡ºï¼Œstackå°±é‡Šæ”¾ï¼Œå¼•ç”¨å°±æ‰äº†ï¼‰

    

12. **éå†ç±»çš„å®ä¾‹åŒ–å¯¹è±¡ï¼ˆè‡ªå®šä¹‰ç±»çš„è¿­ä»£å™¨ï¼‰**

```cpp
bool operator==(const HashMap<K, M, H>& lhs, const HashMap<K, M, H>& rhs) {
for (const auto [key, mapped] : lhs){
        ã€‚ã€‚ã€‚
    }
}
```

Q: lhsæ˜¯è‡ªå®šä¹‰çš„HashMapç±»ï¼Œå…¶æˆå‘˜å˜é‡ä¸åªæ˜¯è£…æœ‰<key, mapped>çš„é“¾è¡¨ï¼Œè¿˜æœ‰å„ç§int sizeã€int load_factorç­‰å±æ€§å•Šï¼Œä¸ºå•¥å¯ä»¥ç›´æ¥ç”¨ : è¿›è¡Œrange based for loopæï¼Ÿæˆ–è€…è¯´ï¼Œä¸ºå•¥åªä¼šå¾ªç¯åˆ°æƒ³è¦çš„é“¾è¡¨ï¼Œè€Œä¸ä¼šè®¿é—®å…¶å®ƒæˆå‘˜å˜é‡æï¼Ÿ

A: ä¹‹æ‰€ä»¥ä¼šæœ‰ä¸Šè¿°è¯¯åŒºï¼Œ**æ˜¯å› ä¸ºæŠŠrange basedå¾ªç¯å½“æˆäº†ç¼–è¯‘å™¨å†…ç½®è¿ç®—ç¬¦ï¼Œäº‹å®ä¸Šæ˜¯è‡ªå·±è¦ä¸ºè¯¥ç±»å®šä¹‰ä¸€ä¸ªiteratorç±»ï¼**

range basedçš„ : ç¬¦å·åªæ˜¯ä¸€ç§ç®€ç•¥å†™æ³•ï¼Œå®ƒçš„æºç å®ç°å¤§æ¦‚ä¸ºï¼š

```cpp
for ( range_declaration : range_expression) loop_statement
{  
    auto && __range = range_expression ;   
    auto __begin = begin_expr(__range);   
    auto __end = end_expr(__range);   
    for (;__begin != __end; ++__begin) {  
        range_declaration = *__begin;   
        loop_statement   
    }   
}
```

ç”±æ­¤å¯è§ï¼Œè‡ªå®šä¹‰çš„iteratorç±»è‡³å°‘è¦æœ‰5ä¸ªåŠŸèƒ½ï¼š

- begin( )
- end( )
- é‡è½½++ã€*ã€! =ä¸‰ä¸ªè¿ç®—ç¬¦

å…¶ä¸­begin( )ã€end( )è¿”å›ç±»å‹å°±æ˜¯iterator

ç°åœ¨å°±å¯ä»¥ç†è§£ä¸ºå•¥å¯ç”¨range basedå¾ªç¯è·å–è‡ªå®šä¹‰ç±»ä¸­æƒ³è¦çš„æ•°æ®äº† â€”â€” iteratoråŠŸèƒ½å…¨æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ï¼Œæƒ³è·å–å•¥å°±è·å–å•¥æ



13. **Q: å³å€¼å¼•ç”¨çš„ç±»å¯¹è±¡çš„å±æ€§ä¹Ÿæ˜¯å³å€¼å—ï¼Ÿ**

```cpp
//ç§»åŠ¨æ„é€ å‡½æ•°
template <typename K, typename M, typename H>
HashMap<K, M, H>::HashMap(HashMap&& rhs):
    _size{rhs._size},
    _hash_function{rhs._hash_function},
    _buckets_array{rhs.bucket_count(), nullptr} {
    for (size_t i = 0; i < bucket_count(); i++){
        _buckets_array[i] = rhs._buckets_array[i];
        rhs._buckets_array[i] = nullptr;
    }
    rhs._size = 0;
}
```

A: å°†ç±»å¯¹è±¡ç”¨move()å¼ºè½¬ä¸ºå³å€¼ï¼Œå¹¶ä¸å½±å“ç±»ä¸­æˆå‘˜å˜é‡çš„å·¦å³å€¼å±æ€§ï¼Œè¯¥æ˜¯å•¥è¿˜æ˜¯å•¥



14. **å¯¹ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„è¿›ä¸€æ­¥æ·±å±‚ç†è§£ï¼š**

    Q: è¢«move()è¿‡çš„å˜é‡ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨ç»™é”€æ¯å—ï¼Ÿå¦‚æœä¼šï¼Œé‚£ä¸ºå•¥è¿˜è¦æ‰‹åŠ¨è®©rhs._buckets_array[i] æŒ‡å‘nullptrï¼Ÿå¦‚æœä¸ä¼šï¼Œé‚£å¼ºè½¬å³å€¼æœ‰å•¥æ„ä¹‰å•Šï¼Ÿ

    A: å˜é‡ä¼šè¢«æ€ä¹ˆå¤„ç†ï¼Œä¸å®ƒæ˜¯å¦è¢«move()è¿‡æ²¡åŠæ¯›é’±å…³ç³»ï¼Œ**move()å¹¶ä¸æ”¹å˜å˜é‡æœ¬èº«ï¼Œåªæ˜¯é¢å¤–æä¾›äº†ä¸€ä¸ªreturnçš„å³å€¼**ï¼Œè¿™ä¸€ç‚¹çœ‹æºç å³å¯æ˜ç™½

    ```cpp
    // FUNCTION TEMPLATE move
    template <class _Ty>
    remove_reference_t<_Ty>&& move(_Ty&& _Arg) noexcept { 
        return static_cast<remove_reference_t<_Ty>&&>(_Arg);
    }
    //åªæ˜¯æŠŠè¿”å›å€¼ç”¨static_castå¼ºåˆ¶è½¬æ¢æˆå³å€¼ï¼Œä½†ä¼ å…¥çš„åŸå˜é‡è¯¥æ˜¯å•¥è¿˜æ˜¯å•¥
    ```

    é‚£move()çš„æ„ä¹‰æ˜¯å•¥æ â€”â€” **å¤šæä¾›ä¸€ç§æ•°æ®ç±»å‹ï¼Œç”¨äºé‡è½½å‡½æ•°çš„å½¢å‚åŒ¹é…**ã€‚ è¯´ç™½äº†ï¼Œå°±æ˜¯**æ‰‹åŠ¨å¸®åŠ©ç¼–è¯‘å™¨é€‰æ‹©é‡è½½å‡½æ•°ï¼ŒåŒæ—¶å‘ç¼–è¯‘å™¨å‘èª“å†ä¹Ÿä¸ç¢°è¿™ä¸ªå¯¹è±¡**ï¼ é‚£è¿™ä¸ªä½œç”¨çš„motivationåˆæ˜¯å•¥æ â€”â€” è‹¥æ²¡æœ‰å³å€¼å¼•ç”¨ï¼Œé‚£æ‹·è´å‡½æ•°å°±è¦åˆ†æˆdeep_copy()å’Œshallow_copy()ä¸¤ä¸ªç‰ˆæœ¬æ¥å†™ï¼Œä¸”æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ˜¾å¼è°ƒç”¨ â€”â€” è¿™æ—¢éº»çƒ¦ï¼Œåˆå®¹æ˜“å‡ºé”™ï¼›ä½†åˆ©ç”¨é‡è½½å†™æˆcopy(const T& val)å’Œcopy(T&& val)åï¼Œå°±å¯ä»¥è®©ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ã€‚è€Œè‹¥ç”¨æˆ·è‡ªå·±å‘ç°ï¼Œè¯¶ï¼è¿™ä¸ªæŒ‡é’ˆaè™½ç„¶æ˜¯å·¦å€¼ï¼Œä½†æˆ‘ä¹‹åä¸ç”¨äº†ï¼Œå¯ä»¥ç›´æ¥æµ…æ‹·è´ï¼Œokï¼Œé‚£ç”¨move()å¼ºè½¬ä¸€æ¬¡å³å¯ï¼Œå³æ‰€è°“çš„â€œæ‰‹åŠ¨å¸®ç¼–è¯‘å™¨é€‰æ‹©é‡è½½å‡½æ•°â€ã€‚ å›åˆ°ä¸€å¼€å§‹çš„é—®é¢˜ï¼Œç»move()çš„å˜é‡ä¼šè¢«é”€æ¯å’©ï¼Ÿ é‚£å¾—çœ‹ç§»åŠ¨æ„é€ å‡½æ•°/ç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°æ˜¯å’‹å®ç°çš„ï¼šåœ¨ä¸Šé¢HashMapçš„é‚£ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ‰‹åŠ¨é‡Šæ”¾äº†æŒ‡é’ˆå¹¶è®©sizeæ¸…é›¶ï¼ˆè¿™ä¹Ÿæ˜¯ç¬¦åˆå®é™…å†™ä»£ç çš„æ€è·¯çš„ï¼Œæ—¢ç„¶è®¤å®šäº†â€œè¿™ä¸ªå¯¹è±¡ä¸ä¼šå†ç¢°â€ï¼Œé‚£å°±åº”è¯¥é‡Šæ”¾å®ƒï¼Œç•™ç€æ—¢å ç©ºé—´ã€åˆæœ‰ä¿®æ”¹å†…å­˜çš„é£é™©ï¼‰ï¼›åä¹‹ï¼Œå¦‚æœç§»åŠ¨æ„é€ å‡½æ•°ä¸­æ²¡é‡Šæ”¾å³å€¼ï¼Œé‚£å®ƒå°±åŸå°ä¸åŠ¨åœ°åœ¨é‚£å„¿ â€”â€” è¯´åˆ°åº•ï¼Œè¿˜æ˜¯**ä¸å˜é‡æ˜¯å·¦å€¼/å³å€¼æœ¬èº«æ²¡åŠæ¯›é’±å…³ç³»ï¼Œè€Œæ˜¯å–å†³äºSMFä¸­æ€ä¹ˆå»å¤„ç†è¿™ä¸ªå˜é‡**

    ```cpp
    void test_fun(const int& val){
        cout << "value: " << val<< ", type: å·¦å€¼" << endl;
    }
    
    void test_fun(const int&& val){
        cout << "value: " << val<< ", type: å³å€¼" << endl;
    }
    
    int main()
    {
        int a = 1;
        int b = move(a);
        test_fun(a); //aæ²¡æœ‰è¢«é”€æ¯
        test_fun(b);
        return 0;
    }
    ```

    ![](https://s2.loli.net/2023/04/14/H3Y1s7jSPFquXCK.png)

